(this["webpackJsonpvilisov-bbd"]=this["webpackJsonpvilisov-bbd"]||[]).push([[0],{24:function(e,t,n){e.exports=n.p+"static/media/Astronaut.cfa34173.glb"},25:function(e,t,n){e.exports=n.p+"static/media/VoxelGuy.54dc6cca.glb"},26:function(e,t,n){e.exports=n.p+"static/media/Woman.c9ed6341.glb"},27:function(e,t,n){e.exports=n.p+"static/media/tree.46613934.glb"},28:function(e,t,n){e.exports=n.p+"static/media/blackgrid.3d7d5793.jpg"},30:function(e,t,n){e.exports=n.p+"static/media/coin.e8a0d624.glb"},35:function(e,t,n){e.exports=n(44)},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r=n(5),a=n.n(r),i=n(18),o=n.n(i),s=n(2),c=n(19),u=n(4),l=n(3),m=n(20),d=n(15),h=n(0);window.THREE=h;var p=h,f=n(21),v=n(34),g=n(22),b=function e(t){Object(s.a)(this,e),this.animate=function(e){},this.dispose=function(){},this.props=t},x={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*Math.pow(e,2):(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},easeIn:function(e,t){return Math.pow(e,t)},easeOut:function(e,t){return 1-x.easeIn(1-e,t)},easeInOut:function(e,t){return e<.5?x.easeIn(2*e,t)/2:1-x.easeIn(2*(1-e),t)/2},easeIn2:function(e){return x.easeIn(e,1.5)},easeOut2:function(e){return x.easeOut(e,1.5)},easeInOut2:function(e){return x.easeInOut(e,1.5)}},M=x,w=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).animateTransitions=function(){var e=[];r.transitions.forEach((function(t){if(t.currentFrame>=t.numberOfFrames)e.push(t);else{var n=t.currentFrame/t.numberOfFrames,r=M[t.timingFuntion]||function(e){return e};t.variable.copy(t.initialValue.clone().lerp(t.value,r(n))),t.currentFrame++}})),e.forEach((function(e){e.onComplete&&e.onComplete(),r.unregisterTransition(e.id)}))},r.registerTransition=function(e){return r.transitions.push({id:r.currentId=(r.currentId+1)%Number.MAX_SAFE_INTEGER,variable:e.variable,value:e.value.clone(),initialValue:e.variable.clone(),numberOfFrames:e.numberOfFrames||10,currentFrame:0,timingFuntion:e.timingFuntion||"none",onComplete:e.onComplete||function(){}}),r.currentId},r.unregisterTransition=function(e){var t=r.transitions.map((function(e){return e.id})).indexOf(e);-1!==t&&r.transitions.splice(t,1)},r.unregisterAllTransitions=function(){return r.transitions.length=0},r.noActiveTransitions=function(){return 0===r.transitions.length},r.transitions=[],r.currentId=0,r}return n}(b),T={renderer:void 0,camera:void 0,scene:new p.Scene,composer:void 0,controls:void 0,clock:new p.Clock,frameNumber:0,units:{},unitsToggled:!1},y=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).init=function(e){var t=e.clientWidth,n=e.clientHeight;r.scene.renderer=new p.WebGLRenderer({antialias:!0,alpha:!0}),r.scene.renderer.setClearColor(0,0),r.scene.renderer.setSize(t,n),r.scene.renderer.setPixelRatio(window.devicePixelRatio),r.scene.renderer.shadowMap.enabled=!0,e.appendChild(r.scene.renderer.domElement),r.scene.camera=new p.PerspectiveCamera(75,t/n,.1,1e3),r.scene.controls=new f.a(r.scene.camera,r.scene.renderer.domElement),r.scene.controls.enabled=!1,r.scene.camera.position.z=-15,r.scene.controls.update(),r.scene.composer=new v.a(r.scene.renderer),r.scene.composer.addPass(new g.a(r.scene.scene,r.scene.camera)),r.initUnits(),r.frameId||(r.frameId=requestAnimationFrame(r.animate))},r.dispose=function(){r.disposeUnits(),cancelAnimationFrame(r.frameId)},r.resize=function(e,t){r.scene.renderer&&r.scene.camera&&(r.scene.camera.aspect=e/t,r.scene.camera.updateProjectionMatrix(),r.scene.renderer.setSize(e,t),r.scene.renderer.setPixelRatio(window.devicePixelRatio))},r.animate=function(){r.scene.frameNumber=(r.scene.frameNumber+1)%5e3;var e=r.scene,t=e.composer,n=e.controls,a=e.units;Object.keys(a).forEach((function(e){return a[e].animate(Object(d.a)({THREE:p},r.scene,{input:r.scene.units.Controls,maxFrameNumber:5e3}))})),n.update(),t.render(),r.frameId=window.requestAnimationFrame(r.animate)},r.initUnits=function(){var e=Object(d.a)({THREE:p},r.scene,{input:r.scene.units.Controls,maxFrameNumber:5e3});Object.keys(r.props.units).forEach((function(t){var n=r.props.units[t];!n.disabled^r.scene.unitsToggled&&(r.scene.units[t]=new n.unit(e),r.scene.units[t].init&&r.scene.units[t].init())}))},r.disposeUnits=function(){var e=r.scene,t=e.scene,n=e.units;for(Object.keys(n).forEach((function(e){return n[e].dispose()}));t.children.length>0;)t.remove(t.children[0])},r.toggleUnits=function(){r.disposeUnits(),r.scene.unitsToggled=!r.scene.unitsToggled,r.initUnits()},r.scene=T,r}return n}(w),O=n(7),I=n.n(O),S=n(8),C=function(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}},F=n(23),j=function(){var e=Object(S.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){return(new F.a).load(t,(function(t){return e(t)}),(function(e){return console.log(e.loaded/e.total*100+"% loaded")}),(function(e){return n(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=n(24),P=n.n(E),U=n(25),V=n.n(U),B=n(26),R=n.n(B),z=new p.Vector3(-300,-300,-300),A=new p.Vector3(300,300,300),D=new p.Vector3(1,0,0),k=new p.Vector3(0,1,0),N=new p.Vector3(0,0,1),Q=new p.Vector3(0,0,0),H=new p.Vector2(0,0),_=new p.Vector3,L=new p.Quaternion,W=[{file:V.a,scale:5},{file:P.a,scale:1.25},{file:R.a,scale:3}],G=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).loadModel=Object(S.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=W[Math.round(Math.random()*(W.length-1))],e.next=3,j(t.file);case 3:r.gtlf=e.sent,r.model=r.gtlf.scene,r.mixer=new p.AnimationMixer(r.gtlf.scene),r.action=r.mixer.clipAction(r.gtlf.animations[0]),r.action.play(),r.model.scale.set(t.scale,t.scale,t.scale),r.props.scene.add(r.model);case 10:case"end":return e.stop()}}),e)}))),r.animate=function(e){var t,n;if(r.model){C()?H.set(e.input.move.z>0?e.input.move.angleTo(N)/1.5*Math.sign(e.input.move.x):(Math.PI-e.input.move.angleTo(N))/1.5*Math.sign(e.input.move.x),-Math.PI/16):H.set(e.input.mouse.alphaX*Math.PI*1.5,e.input.mouse.alphaY*Math.PI/12),Q.copy(r.model.position).add(e.input.move.clone().applyAxisAngle(k,H.x)),Q.clamp(z,A);var a=!1,i=null===(t=e.units)||void 0===t||null===(n=t.Landscape)||void 0===n?void 0:n.trees;if(i)for(var o=0;o<i.length&&!a;o++){Q.distanceTo(i[o].position)<1.25*i[o].scale&&(a=!0)}a||(r.model.position.copy(Q),e.input.move.length()>.01&&r.mixer.update(e.clock.getDelta())),r.model.quaternion.slerp(L.setFromAxisAngle(k,H.x),.025),_=new p.Vector3(0,0,-15).applyAxisAngle(D,H.y).applyAxisAngle(k,H.x),r.props.controls.target.copy(r.model.position),r.props.controls.target.setY(5),r.props.camera.position.copy(r.props.controls.target.clone().add(_))}},r.dispose=function(){},r.loadModel(),r}return n}(b),Y=n(14),X=n.n(Y),K=function(){var e=Object(S.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){return(new p.TextureLoader).load(t,(function(t){return e(t)}),(function(e){}),(function(e){return n(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=n(27),J=n.n(q),$=n(28),Z=n.n($),ee=(new p.Vector3(1,0,0),new p.Vector3(0,1,0),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).loadModel=Object(S.a)(I.a.mark((function e(){var t,n,a,i,o,s,c,u;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(Z.a);case 2:return(t=e.sent).wrapS=p.RepeatWrapping,t.wrapT=p.RepeatWrapping,t.repeat.set(27,27),r.plane=new p.Mesh(new p.PlaneGeometry(600,600,1,1),new p.MeshBasicMaterial({map:t,side:p.DoubleSide})),r.plane.rotateX(Math.PI/2),r.props.scene.add(r.plane),e.next=11,j(J.a);case 11:for(n=e.sent.scene,a=new p.Object3D,i=new p.Vector3,r.treeInstance=new p.InstancedMesh(n.children[0].geometry,n.children[0].material,75),r.treeInstance.instanceMatrix.setUsage(p.DynamicDrawUsage),r.props.scene.add(r.treeInstance),r.trees=[],o=0;o<75;o++)s=Math.max(Math.random(),.1)*Math.sign(Math.random()-.5),c=Math.max(Math.random(),.1)*Math.sign(Math.random()-.5),i.set(300*s,37.5*Math.random(),300*c),u=10*(1+Math.random()),a.scale.set(u,u,u),a.position.copy(i),r.trees.push({position:(new p.Vector3).copy(a.position),scale:u}),a.rotation.y=(-.5+Math.random())*Math.PI/2,a.rotation.x=(.5+Math.random())*Math.PI/2,a.updateMatrix(),r.treeInstance.setMatrixAt(o,a.matrix);r.treeInstance.instanceMatrix.needsUpdate=!0;case 20:case"end":return e.stop()}}),e)}))),r.animate=function(e){},r.dispose=function(){},r.loadModel(),r}return n}(b)),te=n(29),ne=n.n(te),re=n(30),ae=n.n(re),ie=new p.Vector3(12,12,12),oe=new p.Vector3(.1,.1,.1),se=new p.Object3D,ce=new p.Vector3,ue=function(){return new p.Vector3(2*(Math.random()-.5)*300*.7,35,2*(Math.random()-.5)*300*.7)},le=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).loadModel=Object(S.a)(I.a.mark((function e(){var t,n,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(ae.a);case 2:for(t=e.sent.scene,r.coinInstance=new p.InstancedMesh(t.children[0].geometry,t.children[0].material,300),r.coinInstance.instanceMatrix.setUsage(p.DynamicDrawUsage),r.props.scene.add(r.coinInstance),n=Math.floor(r.coins.length),a=0;a<n;a++)r.emmitCoin(r.coins[a]);setTimeout((function(){for(var e=n;e<r.coins.length;e++)r.emmitCoin(r.coins[e])}),3e3);case 9:case"end":return e.stop()}}),e)}))),r.animate=function(e){r.coinInstance&&(r.animateTransitions(),ce.copy(e.controls.target),ce.setY(ce.y-3),r.coins.forEach((function(t){if(t.position.distanceTo(ce)<5){var n=r.sprites[Math.round(Math.random()*(r.sprites.length-1))];n.position.copy(ce),n.position.setY(n.position.y+4),r.registerTransition({variable:n.position,value:new p.Vector3(n.position.x,n.position.y+3,n.position.z),numberOfFrames:25,timingFuntion:"easeOutQuad",onComplete:function(){return n.position.setY(600)}}),r.emmitCoin(t)}switch(se.position.copy(t.position),se.scale.copy(t.scale),t.index%3){case 0:se.rotation.x=(1e3*t.index+100*e.frameNumber)/e.maxFrameNumber*Math.PI;break;case 1:se.rotation.y=(1e3*t.index+100*e.frameNumber)/e.maxFrameNumber*Math.PI;break;case 2:se.rotation.z=(1e3*t.index+100*e.frameNumber)/e.maxFrameNumber*Math.PI}se.updateMatrix(),r.coinInstance.setMatrixAt(t.index,se.matrix)})),r.coinInstance.instanceMatrix.needsUpdate=!0)},r.emmitCoin=function(e){e.position.copy(ue()),e.scale.copy(ie),r.unregisterTransition(e.transitionId),e.transitionId=r.registerTransition({variable:e.position,value:(new p.Vector3).copy(e.position).setY(1),numberOfFrames:Math.round(250*(.25+Math.random())),onComplete:function(){e.transitionId=r.registerTransition({variable:e.scale,value:oe,numberOfFrames:150,timingFuntion:"easeInQuad",onComplete:function(){return r.emmitCoin(e)}})}}),se.position.copy(e.position),se.scale.copy(e.scale),se.updateMatrix(),r.coinInstance.setMatrixAt(e.index,se.matrix),r.coinInstance.instanceMatrix.needsUpdate=!0},r.sprites=["\ud83c\udf05","\u2728","\u2764\ufe0f","\ud83d\udc8b\ud83d\udc38","\ud83e\udde0\ud83d\udc4c\ud83c\udffb","\ud83d\udef9\ud83d\udc59","\ud83d\udcbb","\ud83c\uddee\ud83c\uddf1","\ud83d\udc9c\ud83c\udf19","\ud83c\uddf7\ud83c\uddfa\u2b06\ufe0f","\ud83e\udd8a\ud83d\udecf","\ud83d\udd1e","\ud83e\udd6d","\ud83c\udff3\ufe0f\u200d\ud83c\udf08","\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\ud83d\udcd5","\ud83c\udfa8\ud83d\ude45\ud83c\udffb\u200d\u2640\ufe0f","\ud83d\ude0e\ud83d\udc6e\ud83c\udffe\u200d\u2642\ufe0f","\ud83c\udfa4\ud83d\udca9","\ud83e\udd56","\ud83d\udc51","\ud83e\uddec\ud83c\udfc6","\ud83d\udd79","\ud83d\udca1","\u270a\ud83c\udffe\ud83d\udd25","\ud83e\udda0\ud83c\udfe1","\ud83d\udc1e\ud83e\udddd\ud83c\udffc\u200d\u2640","\ud83c\udfad\ud83d\udea7","\ud83d\udc16\ud83d\udc43\ud83c\udffb","\ud83d\udc0d\ud83d\udeb8","\u23f3\ud83d\ude2c"].map((function(t){var n=new ne.a({material:{color:16777215},redrawInterval:!1,textSize:3,minFontSize:128,maxFontSize:128,texture:{text:t}});return n.position.set(0,600,0),e.scene.add(n),n})),r.coins=Array.from({length:300},(function(e,t){return{index:t,transitionId:void 0,position:ue(),scale:ie.clone()}})),r.loadModel(),r}return n}(w),me=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;Object(s.a)(this,n),(r=t.call(this,e)).animate=function(e){var t=10*e.frameNumber/e.maxFrameNumber*Math.PI*2,n=t+2*Math.PI/3,a=Math.cos(t),i=Math.cos(n);r.light2.position.set(15*a,3,15*Math.pow(1-a*a,.5)),r.light3.position.set(15*i,3,15*Math.pow(1-i*i,.5))},r.dispose=function(){};var a=e.scene,i=e.THREE;return r.light0=new i.HemisphereLight(16777215,4473924,1.25),r.light0.position.set(0,15,0),a.add(r.light0),r.light2=new i.DirectionalLight(15619566,2.95),r.light2.position.set(15,7,0),a.add(r.light2),r.light3=new i.DirectionalLight(7846894,2.95),r.light3.position.set(15*Math.cos(2*Math.PI/3),7,15*Math.sin(2*Math.PI/3)),a.add(r.light3),r}return n}(b),de=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;Object(s.a)(this,n),(r=t.call(this,e)).animate=function(e){},r.dispose=function(){};var a=e.scene,i=e.THREE;return r.fog=new i.Fog(4473924,35,155),a.fog=r.fog,r}return n}(b),he=n(31),pe=n.n(he),fe=new p.Vector3(0,1,0),ve={mouse:{alphaX:0,alphaY:0},move:new p.Vector3,moveFlags:{up:[{code:87,pressed:!1},{code:38,pressed:!1}],down:[{code:83,pressed:!1},{code:40,pressed:!1}],left:[{code:68,pressed:!1},{code:39,pressed:!1}],right:[{code:65,pressed:!1},{code:37,pressed:!1}]}},ge=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).init=function(){var e={zone:document.getElementById("zone-joystick"),mode:"static",position:{x:Math.round(window.innerWidth/4*3),y:Math.round(window.innerHeight/5*4)}};r.joystickManager=pe.a.create(e),r.joystickManager[0].on("move",(function(e,t){r.move.set(-t.force/7,0,0).applyAxisAngle(fe,t.angle.radian)})),r.joystickManager[0].on("end",(function(e){r.move.set(0,0,0)}))},r.animate=function(e){var t=function(e){return e.map((function(e){return e.pressed})).reduce((function(e,t){return e||t}))?1:0};C()||r.move.set(t(r.moveFlags.right)-t(r.moveFlags.left),0,t(r.moveFlags.up)-t(r.moveFlags.down)).normalize().multiplyScalar(.35)},r.handleMouseMove=function(e){e.pageX&&e.pageY?(r.mouse.alphaX=-X()(e.pageX/window.innerWidth-.5,-.5,.5),r.mouse.alphaY=X()(e.pageY/window.innerHeight-.5,-.5,.5)):console.log("no mouse found")},r.handleKeyDown=function(e){return Object.keys(r.moveFlags).forEach((function(t){return r.moveFlags[t].forEach((function(t){return t.pressed|=t.code===e.keyCode}))}))},r.handleKeyUp=function(e){return Object.keys(r.moveFlags).forEach((function(t){return r.moveFlags[t].forEach((function(t){return t.pressed&=!(t.code===e.keyCode)}))}))},r.dispose=function(){C()||window.removeEventListener("mousemove",r.handleMouseMove,!1)},Object.keys(ve).forEach((function(e){return r[e]=ve[e]})),C()||(window.addEventListener("mousemove",r.handleMouseMove,!1),window.addEventListener("keydown",r.handleKeyDown,!1),window.addEventListener("keyup",r.handleKeyUp,!1)),r}return n}(b),be=(n(9),n(32)),xe=n(33),Me=n(6),we=n(10),Te=n(16),ye=function(e,t,n,r){Me.a.call(this),this.strength=void 0!==t?t:1,this.radius=n,this.threshold=r,this.resolution=void 0!==e?new h.Vector2(e.x,e.y):new h.Vector2(256,256),this.clearColor=new h.Color(0,0,0);var a={minFilter:h.LinearFilter,magFilter:h.LinearFilter,format:h.RGBAFormat};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;var i=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2);this.renderTargetBright=new h.WebGLRenderTarget(i,o,a),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(var s=0;s<this.nMips;s++){var c=new h.WebGLRenderTarget(i,o,a);c.texture.name="UnrealBloomPass.h"+s,c.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(c);var u=new h.WebGLRenderTarget(i,o,a);u.texture.name="UnrealBloomPass.v"+s,u.texture.generateMipmaps=!1,this.renderTargetsVertical.push(u),i=Math.round(i/2),o=Math.round(o/2)}void 0===Te.a&&console.error("UnrealBloomPass relies on LuminosityHighPassShader");var l=Te.a;this.highPassUniforms=h.UniformsUtils.clone(l.uniforms),this.highPassUniforms.luminosityThreshold.value=r,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new h.ShaderMaterial({uniforms:this.highPassUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,defines:{}}),this.separableBlurMaterials=[];var m=[3,5,7,9,11];for(i=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2),s=0;s<this.nMips;s++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(m[s])),this.separableBlurMaterials[s].uniforms.texSize.value=new h.Vector2(i,o),i=Math.round(i/2),o=Math.round(o/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new h.Vector3(1,1,1),new h.Vector3(1,1,1),new h.Vector3(1,1,1),new h.Vector3(1,1,1),new h.Vector3(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,void 0===we.a&&console.error("UnrealBloomPass relies on CopyShader");var d=we.a;this.copyUniforms=h.UniformsUtils.clone(d.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new h.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:h.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new h.Color,this.oldClearAlpha=1,this.basic=new h.MeshBasicMaterial,this.fsQuad=new Me.a.FullScreenQuad(null)};ye.prototype=Object.assign(Object.create(Me.a.prototype),{constructor:ye,dispose:function(){for(var e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()},setSize:function(e,t){var n=Math.round(e/2),r=Math.round(t/2);this.renderTargetBright.setSize(n,r);for(var a=0;a<this.nMips;a++)this.renderTargetsHorizontal[a].setSize(n,r),this.renderTargetsVertical[a].setSize(n,r),this.separableBlurMaterials[a].uniforms.texSize.value=new h.Vector2(n,r),n=Math.round(n/2),r=Math.round(r/2)},render:function(e,t,n,r,a){this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha();var i=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),a&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);for(var o=this.renderTargetBright,s=0;s<this.nMips;s++)this.fsQuad.material=this.separableBlurMaterials[s],this.separableBlurMaterials[s].uniforms.colorTexture.value=o.texture,this.separableBlurMaterials[s].uniforms.direction.value=ye.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[s]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[s].uniforms.colorTexture.value=this.renderTargetsHorizontal[s].texture,this.separableBlurMaterials[s].uniforms.direction.value=ye.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[s]),e.clear(),this.fsQuad.render(e),o=this.renderTargetsVertical[s];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,a&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.fsQuad.render(e)),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=i},getSeperableBlurMaterial:function(e){return new h.ShaderMaterial({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new h.Vector2(.5,.5)},direction:{value:new h.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat fSigma = float(SIGMA);\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\t\t\t\t\t\tfloat x = float(i);\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\t\t\t\t\t\tweightSum += 2.0 * w;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 0.1);\n\t\t\t\t}"})},getCompositeMaterial:function(e){return new h.ShaderMaterial({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D blurTexture1;\t\t\t\tuniform sampler2D blurTexture2;\t\t\t\tuniform sampler2D blurTexture3;\t\t\t\tuniform sampler2D blurTexture4;\t\t\t\tuniform sampler2D blurTexture5;\t\t\t\tuniform sampler2D dirtTexture;\t\t\t\tuniform float bloomStrength;\t\t\t\tuniform float bloomRadius;\t\t\t\tuniform float bloomFactors[NUM_MIPS];\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\t\t\t\t\t\t\t\tfloat lerpBloomFactor(const in float factor) { \t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\t\t\t\t}"})}}),ye.BlurDirectionX=new h.Vector2(1,0),ye.BlurDirectionY=new h.Vector2(0,1);var Oe=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;Object(s.a)(this,n),(r=t.call(this,e)).animate=function(e){r.pass.strength=r.params[0],r.pass.radius=r.params[1],r.pass.threshold=r.params[2]},r.dispose=function(){};var a=e.renderer,i=e.composer,o=e.THREE;return r.params=[.5,1,1],r.pass=Object(be.a)(ye,[new o.Vector2(a.getSize(new o.Vector2).x,a.getSize(new o.Vector2).y)].concat(Object(xe.a)(r.params))),i.addPass(r.pass),r}return n}(b),Ie=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).componentWillUnmount=function(){r.scene.dispose()},r.render=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"Viewer",ref:r.viewerRef},a.a.createElement("div",{id:"zone-joystick"})),a.a.createElement("div",{className:"buttons"},r.scene.scene.units.BloomPostprocessing&&r.scene.scene.units.BloomPostprocessing.params.map((function(e,t){return a.a.createElement("input",{className:"buttons__item",value:r.state.params[t],onChange:function(e){r.scene.scene.units.BloomPostprocessing.params[t]=e.target.value,r.state.params.slice()[t]=e.target.value,r.setState({params:r.scene.scene.units.BloomPostprocessing.params})}})}))))},r.state={FilmGrainPostprocessing:!0,BloomPostprocessing:!0,VignettePostprocessing:!0,params:[0,0,0]},r.viewerRef=new a.a.createRef,r.scene=new y({units:{Character:{unit:G,disabled:!1},Landscape:{unit:ee,disabled:!1},Coins:{unit:le,disabled:!1},Lights:{unit:me,disabled:!1},Fog:{unit:de,disabled:!1},Controls:{unit:ge,disabled:!1},BloomPostprocessing:{unit:Oe,disabled:!1}}}),r}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.resizeObs=new m.a(this.resize.bind(this)).observe(this.viewerRef.current),this.scene.init(this.viewerRef.current),setTimeout((function(){return e.setState({params:e.scene.scene.units.BloomPostprocessing.params})}),1250)}},{key:"resize",value:function(){var e=this.viewerRef&&this.viewerRef.current;e&&this.scene.resize(e.clientWidth,e.clientHeight)}}]),n}(r.Component),Se=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).render=function(){return a.a.createElement("div",{className:"text-area"},a.a.createElement("div",{className:"text-area__left-column"},a.a.createElement("div",{className:"text-area__left-column__text"},"\u0447\u0442\u043e \u0433\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0441\u043c\u0435\u0440\u0442\u044c \u0431\u0440\u0438\u0442\u0430\u043d\u0446\u0430 \u0432 \u0442\u044f\u0436\u0451\u043b\u043e\u0439 \u0434\u0435\u043f\u0440\u0435\u0441\u0441\u0438\u0438 \u043c\u043e\u0436\u0435\u0442 \u0440\u0430\u0441\u0441\u043a\u0430\u0437\u0430\u0442\u044c \u043d\u0430\u043c \u043e \u0442\u043e\u043c, \u043a\u0430\u043a \u043c\u044b \u0440\u0430\u0441\u043f\u043e\u0440\u044f\u0436\u0430\u0435\u043c\u0441\u044f \u0440\u0435\u0441\u0443\u0440\u0441\u0430\u043c\u0438 \u0438 \u0431\u0443\u0434\u0435\u043c \u0440\u0430\u0441\u043f\u043e\u0440\u044f\u0436\u0430\u0442\u044c\u0441\u044f \u0438\u043c\u0438 \u0432 \u0431\u0443\u0434\u0443\u0449\u0435\u043c? \u0447\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u0431\u0435\u0437\u0443\u0441\u043b\u043e\u0432\u043d\u044b\u0439 \u0431\u0430\u0437\u043e\u0432\u044b\u0439 \u0434\u043e\u0445\u043e\u0434? \u043a\u0430\u043a \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u0441\u044f \u0432\u0430\u0448\u0430 \u0436\u0438\u0437\u043d\u044c, \u043f\u043e\u043b\u0443\u0447\u0430\u0439 \u0432\u044b \u043a\u0430\u0436\u0434\u044b\u0439 \u043c\u0435\u0441\u044f\u0446 \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0443 \u0442\u043e\u043b\u044c\u043a\u043e \u0437\u0430 \u0442\u043e, \u0447\u0442\u043e \u0436\u0438\u0432\u0451\u0442\u0435?")),a.a.createElement("div",{className:"text-area__right-column"},a.a.createElement("h1",{className:"h1"},"SITTING\xa0IN\xa0A",a.a.createElement("br",null),"ROOM.\xa0I\xa0AM.")))},r}return n}(r.Component),Ce=(n(43),function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ie,null),a.a.createElement(Se,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.906ecf62.chunk.js.map