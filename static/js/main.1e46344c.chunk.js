(this["webpackJsonpvilisov-bbd"]=this["webpackJsonpvilisov-bbd"]||[]).push([[0],{29:function(e,t,n){e.exports=n.p+"static/media/Astronaut.f3152ab1.glb"},30:function(e,t,n){e.exports=n.p+"static/media/tree.46613934.glb"},31:function(e,t,n){e.exports=n.p+"static/media/blackgrid.3d7d5793.jpg"},33:function(e,t,n){e.exports=n.p+"static/media/coin.e8a0d624.glb"},35:function(e,t,n){e.exports=n(57)},56:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var r=n(5),a=n.n(r),i=n(21),o=n.n(i),s=n(1),u=n(2),c=n(22),l=n(3),d=n(4),m=n(23),h=n(14),p=n(0);window.THREE=p;var f=p,v=n(24),g=n(34),b=n(25),M=n(26),w=n.n(M),x=n(16),T=function e(t){Object(u.a)(this,e),this.animate=function(e){},this.dispose=function(){},this.props=t},O={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*Math.pow(e,2):(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},easeIn:function(e,t){return Math.pow(e,t)},easeOut:function(e,t){return 1-O.easeIn(1-e,t)},easeInOut:function(e,t){return e<.5?O.easeIn(2*e,t)/2:1-O.easeIn(2*(1-e),t)/2},easeIn2:function(e){return O.easeIn(e,1.5)},easeOut2:function(e){return O.easeOut(e,1.5)},easeInOut2:function(e){return O.easeInOut(e,1.5)}},y=O,S=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).animateTransitions=function(){var e=[];r.transitions.forEach((function(t,n){if(t.currentFrame===t.numberOfFrames)e.push(n);else{var r=t.currentFrame/t.numberOfFrames,a=y[t.timingFuntion]||function(e){return e};t.variable.copy(t.initialValue.clone().lerp(t.value,a(r))),t.currentFrame++}})),e.forEach((function(e){r.transitions[e]&&r.transitions[e].onComplete(),r.transitions=[].concat(Object(x.a)(r.transitions.slice(0,e)),Object(x.a)(r.transitions.slice(e+1)))}))},r.registerTransition=function(e){r.transitions.push({variable:e.variable,value:e.value,initialValue:e.variable.clone(),numberOfFrames:e.numberOfFrames||10,currentFrame:0,timingFuntion:e.timingFuntion||"none",onComplete:e.onComplete||function(){}})},r.unregisterAllTransitions=function(){return r.transitions.length=0},r.noActiveTransitions=function(){return 0===r.transitions.length},r.transitions=[],r}return n}(T),C=(n(53),n(27)),F=n.n(C),I=n(11),j=n.n(I),U=function(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}},E={mouse:{alphaX:0,alphaY:0},moveFlags:{up:[{code:87,pressed:!1},{code:38,pressed:!1}],down:[{code:83,pressed:!1},{code:40,pressed:!1}],left:[{code:68,pressed:!1},{code:39,pressed:!1}],right:[{code:65,pressed:!1},{code:37,pressed:!1}]}},P={renderer:void 0,camera:void 0,scene:new f.Scene,composer:void 0,controls:void 0,clock:new f.Clock,frameNumber:0,units:{},unitsToggled:!1},V=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).init=function(e){r.inputHandlerInit();var t=e.clientWidth,n=e.clientHeight;r.scene.renderer=new f.WebGLRenderer({antialias:!0,alpha:!0}),r.scene.renderer.setClearColor(0,0),r.scene.renderer.setSize(t,n),r.scene.renderer.setPixelRatio(window.devicePixelRatio),r.scene.renderer.shadowMap.enabled=!0,e.appendChild(r.scene.renderer.domElement),r.scene.camera=new f.PerspectiveCamera(75,t/n,.1,1e3),r.scene.controls=new v.a(r.scene.camera,r.scene.renderer.domElement),r.scene.controls.enabled=!1,r.scene.camera.position.z=-15,r.scene.controls.update(),r.scene.composer=new g.a(r.scene.renderer),r.scene.composer.addPass(new b.a(r.scene.scene,r.scene.camera)),r.initUnits(),r.frameId||(r.frameId=requestAnimationFrame(r.animate))},r.dispose=function(){r.disposeUnits(),cancelAnimationFrame(r.frameId)},r.resize=function(e,t){r.scene.renderer&&r.scene.camera&&(r.scene.camera.aspect=e/t,r.scene.camera.updateProjectionMatrix(),r.scene.renderer.setSize(e,t),r.scene.renderer.setPixelRatio(window.devicePixelRatio))},r.animate=function(){r.scene.frameNumber=(r.scene.frameNumber+1)%5e3;var e=r.scene,t=e.composer,n=e.controls,a=e.units;Object.keys(a).forEach((function(e){return a[e].animate(Object(h.a)({THREE:f},r.scene,{input:r.input,maxFrameNumber:5e3}))})),n.update(),t.render(),r.frameId=window.requestAnimationFrame(r.animate)},r.initUnits=function(){var e=Object(h.a)({THREE:f},r.scene,{input:r.input,maxFrameNumber:5e3});Object.keys(r.props.units).forEach((function(t){var n=r.props.units[t];!n.disabled^r.scene.unitsToggled&&(r.scene.units[t]=new n.unit(e))}))},r.disposeUnits=function(){var e=r.scene,t=e.scene,n=e.units;for(Object.keys(n).forEach((function(e){return n[e].dispose()}));t.children.length>0;)t.remove(t.children[0])},r.toggleUnits=function(){r.disposeUnits(),r.scene.unitsToggled=!r.scene.unitsToggled,r.initUnits()},r.scene=P,r}return n}(w()(S,(function e(t){var n=this;Object(u.a)(this,e),this.inputHandlerInit=function(){var e={zone:document.getElementById("zone-joystick"),mode:"static",position:{x:Math.round(window.innerWidth/4*3),y:Math.round(window.innerHeight/5*4)}};n.joystickManager=F.a.create(e),n.joystickManager.processOnMove=function(e){return n.input.move.set(-e.offsetX/1e3,0,-e.offsetY/1e3)},n.joystickManager.processOnEnd=function(e){return n.input.move.set(0,0,0)}},this.handleMouseMove=function(e){e.pageX&&e.pageY?(n.input.mouse.alphaX=-j()(e.pageX/window.innerWidth-.5,-.5,.5),n.input.mouse.alphaY=j()(e.pageY/window.innerHeight-.5,-.5,.5)):console.log("no mouse found")},this.handleKeyDown=function(e){return Object.keys(n.input.moveFlags).forEach((function(t){return n.input.moveFlags[t].forEach((function(t){return t.pressed=t.code===e.keyCode}))}))},this.handleKeyUp=function(e){return Object.keys(n.input.moveFlags).forEach((function(t){return n.input.moveFlags[t].forEach((function(t){return t.pressed&=!(t.code===e.keyCode)}))}))},this.dispose=function(){U()||window.removeEventListener("mousemove",n.handleMouseMove,!1)},this.props=t,this.input=E,U()||(window.addEventListener("mousemove",this.handleMouseMove,!1),window.addEventListener("keydown",this.handleKeyDown,!1),window.addEventListener("keyup",this.handleKeyUp,!1))}))),B=n(7),R=n.n(B),z=n(8),D=n(28),k=function(){var e=Object(z.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){return(new D.a).load(t,(function(t){return e(t.scene)}),(function(e){return console.log(e.loaded/e.total*100+"% loaded")}),(function(e){return n(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=n(29),N=n.n(A),Q=new f.Vector3(-300,-300,-300),H=new f.Vector3(300,300,300),L=new f.Vector3(1,0,0),_=new f.Vector3(0,1,0),W=new f.Vector3(0,0,0),Y=new f.Vector3(0,0,0),G=new f.Vector2(0,0),X=new f.Vector3,K=new f.Quaternion,q=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).loadModel=Object(z.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(N.a);case 2:r.model=e.sent,r.props.scene.add(r.model),r.model.scale.set(2,2,2),r.model.position.setY(.05);case 6:case"end":return e.stop()}}),e)}))),r.animate=function(e){var t,n;if(r.model){G.set((G.x+e.input.mouse.alphaX/7)%(2*Math.PI),j()(G.y+e.input.mouse.alphaY/15,0,Math.PI/3)),r.updateMove(e.input),Y.copy(r.model.position).add(W.clone().applyAxisAngle(_,G.x)),Y.clamp(Q,H);var a=!1,i=null===(t=e.units)||void 0===t||null===(n=t.Landscape)||void 0===n?void 0:n.trees;if(i)for(var o=0;o<i.length&&!a;o++){Y.distanceTo(i[o].position)<1.25*i[o].scale&&(a=!0)}a||r.model.position.copy(Y),r.model.quaternion.slerp(K.setFromAxisAngle(_,G.x),.1),X=new f.Vector3(0,0,-15).applyAxisAngle(L,G.y-Math.PI/16).applyAxisAngle(_,G.x),r.props.controls.target.copy(r.model.position),r.props.controls.target.setY(5),r.props.camera.position.copy(r.props.controls.target.clone().add(X))}},r.updateMove=function(e){var t=function(e){return e.map((function(e){return e.pressed})).reduce((function(e,t){return e||t}))?1:0};W.setX(.35*(t(e.moveFlags.right)-t(e.moveFlags.left))),W.setZ(.35*(t(e.moveFlags.up)-t(e.moveFlags.down)))},r.dispose=function(){},r.loadModel(),r}return n}(T),J=function(){var e=Object(z.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){return(new f.TextureLoader).load(t,(function(t){return e(t)}),(function(e){}),(function(e){return n(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=n(30),$=n.n(Z),ee=n(31),te=n.n(ee),ne=(new f.Vector3(1,0,0),new f.Vector3(0,1,0),function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).loadModel=Object(z.a)(R.a.mark((function e(){var t,n,a,i,o,s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(te.a);case 2:return(t=e.sent).wrapS=f.RepeatWrapping,t.wrapT=f.RepeatWrapping,t.repeat.set(27,27),r.plane=new f.Mesh(new f.PlaneGeometry(600,600,1,1),new f.MeshBasicMaterial({map:t,side:f.DoubleSide})),r.plane.rotateX(Math.PI/2),r.props.scene.add(r.plane),e.next=11,k($.a);case 11:for(n=e.sent,a=new f.Object3D,i=new f.Vector3,r.treeInstance=new f.InstancedMesh(n.children[0].geometry,n.children[0].material,100),r.treeInstance.instanceMatrix.setUsage(f.DynamicDrawUsage),r.props.scene.add(r.treeInstance),r.trees=[],o=0;o<100;o++)i.set(300*Math.max(.2,Math.random())*2-300,37.5*Math.random(),300*Math.max(.2,Math.random())*2-300),s=10*(1+Math.random()),a.scale.set(s,s,s),a.position.copy(i),r.trees.push({position:(new f.Vector3).copy(a.position),scale:s}),a.rotation.y=(-.5+Math.random())*Math.PI/2,a.rotation.x=(.5+Math.random())*Math.PI/2,a.updateMatrix(),r.treeInstance.setMatrixAt(o,a.matrix);r.treeInstance.instanceMatrix.needsUpdate=!0;case 20:case"end":return e.stop()}}),e)}))),r.animate=function(e){},r.dispose=function(){},r.loadModel(),r}return n}(T)),re=n(32),ae=n.n(re),ie=n(33),oe=n.n(ie),se=new f.Object3D,ue=new f.Vector3,ce=function(){return new f.Vector3(2*(Math.random()-.5)*300*.7,35,2*(Math.random()-.5)*300*.7)},le=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).loadModel=Object(z.a)(R.a.mark((function e(){var t,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(oe.a);case 2:for(t=e.sent,r.coinInstance=new f.InstancedMesh(t.children[0].geometry,t.children[0].material,300),r.coinInstance.instanceMatrix.setUsage(f.DynamicDrawUsage),r.props.scene.add(r.coinInstance),n=0;n<300;n++)se.position.copy(ce()),se.scale.set(5,5,5),se.updateMatrix(),r.coinInstance.setMatrixAt(n,se.matrix);r.coinInstance.instanceMatrix.needsUpdate=!0,r.emmitCoin();case 9:case"end":return e.stop()}}),e)}))),r.animate=function(e){r.coinInstance&&(r.animateTransitions(),ue.copy(e.controls.target),ue.setY(ue.y-3),r.coins.forEach((function(t,n){if(t.position.distanceTo(ue)<3){t.emitted=!1;var a=r.sprites[Math.round(Math.random()*(r.sprites.length-1))];a.position.copy(ue),a.position.setY(a.position.y+4),r.registerTransition({variable:a.position,value:new f.Vector3(a.position.x,a.position.y+3,a.position.z),numberOfFrames:25,timingFuntion:"easeOutQuad",onComplete:function(){return a.position.setY(600)}})}if(t.emitted)switch(se.position.copy(t.position),n%3){case 0:se.rotation.x=(1e3*n+100*e.frameNumber)/e.maxFrameNumber*Math.PI;break;case 1:se.rotation.y=(1e3*n+100*e.frameNumber)/e.maxFrameNumber*Math.PI;break;case 2:se.rotation.z=(1e3*n+100*e.frameNumber)/e.maxFrameNumber*Math.PI}else se.position.set(0,1500,0);se.updateMatrix(),r.coinInstance.setMatrixAt(n,se.matrix)})),r.coinInstance.instanceMatrix.needsUpdate=!0)},r.dispose=function(){return clearTimeout(r.emmitCoinTimeout)},r.emmitCoin=function(){var e=r.coins.filter((function(e){return!e.emitted}));if(e.length>100){var t=e[0];t.position=ce(),t.emitted=!0,r.registerTransition({variable:t.position,value:(new f.Vector3).copy(t.position).setY(-1),numberOfFrames:Math.round(250*(1+Math.random())),onComplete:function(){return t.emitted=!1}}),se.position.copy(t.position),r.coinInstance.setMatrixAt(t.index,se.matrix)}r.emmitCoinTimeout=setTimeout((function(){return r.emmitCoin()}),Math.round(2*(1+Math.random())))},r.sprites=["\ud83c\udf05","\ud83c\udfc6","\u2728","\ud83d\udc4c\ud83c\udffb","\u2764\ufe0f"].map((function(t){var n=new ae.a({material:{color:16777215},redrawInterval:!1,textSize:3,minFontSize:128,maxFontSize:128,texture:{text:t}});return n.position.set(0,600,0),e.scene.add(n),n})),r.coins=Array.from({length:300},(function(e,t){return{index:t,emitted:!1,position:ce()}})),r.loadModel(),r}return n}(S),de=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var r;Object(u.a)(this,n),(r=t.call(this,e)).animate=function(e){var t=10*e.frameNumber/e.maxFrameNumber*Math.PI*2,n=t+2*Math.PI/3,a=Math.cos(t),i=Math.cos(n);r.light2.position.set(15*a,3,15*Math.pow(1-a*a,.5)),r.light3.position.set(15*i,3,15*Math.pow(1-i*i,.5))},r.dispose=function(){};var a=e.scene,i=e.THREE;return r.light0=new i.HemisphereLight(16777215,4473924,1.25),r.light0.position.set(0,15,0),a.add(r.light0),r.light2=new i.DirectionalLight(15619566,2.95),r.light2.position.set(15,7,0),r.light2.castShadow=!0,a.add(r.light2),r.light3=new i.DirectionalLight(7846894,2.95),r.light3.position.set(15*Math.cos(2*Math.PI/3),7,15*Math.sin(2*Math.PI/3)),r.light3.castShadow=!0,a.add(r.light3),r}return n}(T),me=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var r;Object(u.a)(this,n),(r=t.call(this,e)).animate=function(e){},r.dispose=function(){};var a=e.scene,i=e.THREE;return r.fog=new i.Fog(4473924,35,155),a.fog=r.fog,r}return n}(T),he=(n(9),n(6)),pe=n(10),fe=n(15),ve=function(e,t,n,r){he.a.call(this),this.strength=void 0!==t?t:1,this.radius=n,this.threshold=r,this.resolution=void 0!==e?new p.Vector2(e.x,e.y):new p.Vector2(256,256),this.clearColor=new p.Color(0,0,0);var a={minFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;var i=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2);this.renderTargetBright=new p.WebGLRenderTarget(i,o,a),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(var s=0;s<this.nMips;s++){var u=new p.WebGLRenderTarget(i,o,a);u.texture.name="UnrealBloomPass.h"+s,u.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(u);var c=new p.WebGLRenderTarget(i,o,a);c.texture.name="UnrealBloomPass.v"+s,c.texture.generateMipmaps=!1,this.renderTargetsVertical.push(c),i=Math.round(i/2),o=Math.round(o/2)}void 0===fe.a&&console.error("UnrealBloomPass relies on LuminosityHighPassShader");var l=fe.a;this.highPassUniforms=p.UniformsUtils.clone(l.uniforms),this.highPassUniforms.luminosityThreshold.value=r,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new p.ShaderMaterial({uniforms:this.highPassUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,defines:{}}),this.separableBlurMaterials=[];var d=[3,5,7,9,11];for(i=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2),s=0;s<this.nMips;s++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(d[s])),this.separableBlurMaterials[s].uniforms.texSize.value=new p.Vector2(i,o),i=Math.round(i/2),o=Math.round(o/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new p.Vector3(1,1,1),new p.Vector3(1,1,1),new p.Vector3(1,1,1),new p.Vector3(1,1,1),new p.Vector3(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,void 0===pe.a&&console.error("UnrealBloomPass relies on CopyShader");var m=pe.a;this.copyUniforms=p.UniformsUtils.clone(m.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new p.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:m.vertexShader,fragmentShader:m.fragmentShader,blending:p.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new p.Color,this.oldClearAlpha=1,this.basic=new p.MeshBasicMaterial,this.fsQuad=new he.a.FullScreenQuad(null)};ve.prototype=Object.assign(Object.create(he.a.prototype),{constructor:ve,dispose:function(){for(var e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()},setSize:function(e,t){var n=Math.round(e/2),r=Math.round(t/2);this.renderTargetBright.setSize(n,r);for(var a=0;a<this.nMips;a++)this.renderTargetsHorizontal[a].setSize(n,r),this.renderTargetsVertical[a].setSize(n,r),this.separableBlurMaterials[a].uniforms.texSize.value=new p.Vector2(n,r),n=Math.round(n/2),r=Math.round(r/2)},render:function(e,t,n,r,a){this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha();var i=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),a&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);for(var o=this.renderTargetBright,s=0;s<this.nMips;s++)this.fsQuad.material=this.separableBlurMaterials[s],this.separableBlurMaterials[s].uniforms.colorTexture.value=o.texture,this.separableBlurMaterials[s].uniforms.direction.value=ve.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[s]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[s].uniforms.colorTexture.value=this.renderTargetsHorizontal[s].texture,this.separableBlurMaterials[s].uniforms.direction.value=ve.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[s]),e.clear(),this.fsQuad.render(e),o=this.renderTargetsVertical[s];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,a&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.fsQuad.render(e)),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=i},getSeperableBlurMaterial:function(e){return new p.ShaderMaterial({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new p.Vector2(.5,.5)},direction:{value:new p.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat fSigma = float(SIGMA);\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\t\t\t\t\t\tfloat x = float(i);\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\t\t\t\t\t\tweightSum += 2.0 * w;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 0.1);\n\t\t\t\t}"})},getCompositeMaterial:function(e){return new p.ShaderMaterial({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D blurTexture1;\t\t\t\tuniform sampler2D blurTexture2;\t\t\t\tuniform sampler2D blurTexture3;\t\t\t\tuniform sampler2D blurTexture4;\t\t\t\tuniform sampler2D blurTexture5;\t\t\t\tuniform sampler2D dirtTexture;\t\t\t\tuniform float bloomStrength;\t\t\t\tuniform float bloomRadius;\t\t\t\tuniform float bloomFactors[NUM_MIPS];\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\t\t\t\t\t\t\t\tfloat lerpBloomFactor(const in float factor) { \t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\t\t\t\t}"})}}),ve.BlurDirectionX=new p.Vector2(1,0),ve.BlurDirectionY=new p.Vector2(0,1);var ge=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).componentWillUnmount=function(){r.scene.dispose()},r.render=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"Viewer",ref:r.viewerRef},a.a.createElement("div",{id:"zone-joystick"})),a.a.createElement("div",{className:"buttons"},Object.keys(r.state).map((function(e,t){return a.a.createElement("div",{className:"buttons__item",onClick:function(){r.scene.scene.composer.passes[t+1].enabled=!r.state[e],r.setState(Object(s.a)({},e,!r.state[e]))}},e," ",r.state[e]?"on":"off")}))))},r.state={FilmGrainPostprocessing:!0,BloomPostprocessing:!0,VignettePostprocessing:!0},r.viewerRef=new a.a.createRef,r.scene=new V({units:{Character:{unit:q,disabled:!1},Landscape:{unit:ne,disabled:!1},Coins:{unit:le,disabled:!1},Lights:{unit:de,disabled:!1},Fog:{unit:me,disabled:!1}}}),r}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.resizeObs=new m.a(this.resize.bind(this)).observe(this.viewerRef.current),this.scene.init(this.viewerRef.current)}},{key:"resize",value:function(){var e=this.viewerRef&&this.viewerRef.current;e&&this.scene.resize(e.clientWidth,e.clientHeight)}}]),n}(r.Component),be=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).render=function(){return a.a.createElement("div",{className:"text-area"},a.a.createElement("div",{className:"text-area__left-column"},a.a.createElement("div",{className:"text-area__left-column__text"},"\u0447\u0442\u043e \u0433\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0441\u043c\u0435\u0440\u0442\u044c \u0431\u0440\u0438\u0442\u0430\u043d\u0446\u0430 \u0432 \u0442\u044f\u0436\u0451\u043b\u043e\u0439 \u0434\u0435\u043f\u0440\u0435\u0441\u0441\u0438\u0438 \u043c\u043e\u0436\u0435\u0442 \u0440\u0430\u0441\u0441\u043a\u0430\u0437\u0430\u0442\u044c \u043d\u0430\u043c \u043e \u0442\u043e\u043c, \u043a\u0430\u043a \u043c\u044b \u0440\u0430\u0441\u043f\u043e\u0440\u044f\u0436\u0430\u0435\u043c\u0441\u044f \u0440\u0435\u0441\u0443\u0440\u0441\u0430\u043c\u0438 \u0438 \u0431\u0443\u0434\u0435\u043c \u0440\u0430\u0441\u043f\u043e\u0440\u044f\u0436\u0430\u0442\u044c\u0441\u044f \u0438\u043c\u0438 \u0432 \u0431\u0443\u0434\u0443\u0449\u0435\u043c? \u0447\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u0431\u0435\u0437\u0443\u0441\u043b\u043e\u0432\u043d\u044b\u0439 \u0431\u0430\u0437\u043e\u0432\u044b\u0439 \u0434\u043e\u0445\u043e\u0434? \u043a\u0430\u043a \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u0441\u044f \u0432\u0430\u0448\u0430 \u0436\u0438\u0437\u043d\u044c, \u043f\u043e\u043b\u0443\u0447\u0430\u0439 \u0432\u044b \u043a\u0430\u0436\u0434\u044b\u0439 \u043c\u0435\u0441\u044f\u0446 \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0443 \u0442\u043e\u043b\u044c\u043a\u043e \u0437\u0430 \u0442\u043e, \u0447\u0442\u043e \u0436\u0438\u0432\u0451\u0442\u0435?")),a.a.createElement("div",{className:"text-area__right-column"},a.a.createElement("h1",{className:"h1"},"SITTING\xa0IN\xa0A",a.a.createElement("br",null),"ROOM.\xa0I\xa0AM.")))},r}return n}(r.Component),Me=(n(56),function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(ge,null),a.a.createElement(be,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.1e46344c.chunk.js.map